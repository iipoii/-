# Digital-image-processing-assignment
# 数字图像处理课程作业

使用python环境如下
```
import matplotlib.pyplot as plt
import cv2
import numpy as np
```
#### 1. ex1作业题目:对一张灰度图片进行线性、分段线性、非线性的点运算，对比原图和进行灰度变化后的效果

代码实现思路：
使用```cv2.imread()```函数读取灰度图像,保存为一个```ndarray```数组,数组元素为格式为uint8的灰度值。在此基础上对数组元素（即灰度）进行运算，最终实现题目要求。


#### 2. ex2作业题目:图像的平移，镜像和旋转，以及这三种几何变换的复合

代码实现思路：
提供了两种解决方案
1.像素的空间坐标可以由在数组中的索引得出，以行作为x坐标，列作为y坐标，即可等效于几何空间中的变化。通过```np.ndenumerate()```遍历图片中的像素，由索引构建原始坐标向量，通过```np.dot()```与变化矩阵实现矩阵相乘，即可得出目标坐标向量，再将其变化为索引，即可实现目标变换。
2.使用opencv中集成工具```cv2.warpAffine()```，```cv2.flip()```，```cv2.getRotationMatrix2D()```等实现。

#### 3. ex3作业题目：编程实现以下三种情况的傅里叶反变换，进而比较复原图像的区别，理解傅里叶变换后的幅度谱和相位谱
###### (1)从频谱和相位谱直接重建
###### (2)幅度谱不变，相位谱置0
###### (3)相位谱不变，幅度谱置常数A

代码实现思路：
使用```cv2.dft()```和```cv2.idft()```实现傅里叶变换和傅里叶反变换，使用```cv2.magnitude()```获取幅值，使用```cv2.phase()```获取相位。
```cv2.dft()```对目标图像进行离散傅里叶变化后，返回形状与目标图像相同的两个数组，分别为变化后的实部与虚部，与```cv2.idft()```作为逆变换的输入是相对应的。通过```cv2.magnitude()```和```cv2.phase()```获取幅值与相位后分别存储在```mag```与```phase```矩阵中。改变```mag```或```phase```矩阵的值，即改变幅值或相位后，由幅值```mag```乘以对应位置的相位```phase```的余弦与正弦即可重建傅里叶变换结果的实部与虚部。

#### 4. ex4作业题目：编程实现维纳滤波，比较信噪比未知，信噪比已知，图像和噪声自相关函数已知，这三种情况下的图像复原结果
(未完成)
#### 5. ex5作业题目：使用DPCM编码，对随机一张灰度图片进行编码和解码，比较不同量化器（1-bit, 2-bit, 4-bit, 8-bit）的重建图像区别，并计算重建图像的PSNR和SSIM值。

代码实现思路：
预测器定义为：
1.第一行第一列元素为初始值，初始值为128。
2.第一行元素等于它左边的元素。
3.第一列元素等于它上边的元素。
4.其余元素等于它左边元素，上边元素，左上元素的平均值。
定义```dpcm_encode()```和```dpcm_decode()```方法。
```dpcm_encode()```中，变量```predicted_pixel```存储预测器输出，```diff_image```存储误差，预测器下一时间输入由两者相加获取；量化可以理解为二进制数位移后丢失有效位数，由整除实现。```dpcm_decode()```方法为```dpcm_encode()```的逆方法，同理即可以得出。

#### 6. ex6作业题目：实现大津法和迭代法阈值分割，并实验比较两者的性能差别。
代码实现思路：
1.大津法：使用```SEG1 = cv2.threshold()```函数实现，入参```type = cv2.THRESH_BINARY + cv2.THRESH_OTSU```，以此实现使用大津法将图像二值化分割。
2.迭代阈值法：使用```cv2.adaptiveThreshold()```函数实现，入参```adaptiveMethod = cv2.ADAPTIVE_THRESH_MEAN_C```表示阈值迭代时取分割的两部分区域的灰度均值的中值，```thresholdType = cv2.THRESH_BINARY```表示将图像二值化分割。
#### 7. ex7作业题目：实现分水岭算法，进行图像分割，并进行测试。
代码实现思路：
1.读取图像并将其转换为灰度图像。
2.对灰度图像进行高斯模糊，以减少噪声。
3.使用Otsu阈值法对灰度图像进行二值化，得到前景和背景的初始分割。
4.使用形态学开运算操作去除噪声，通过迭代多次开运算操作来消除孤立的较小前景区域。
5.使用膨胀操作扩张前景区域，得到背景区域。
6.使用距离变换（distance transform）计算图像中每个像素点到最近背景像素点的距离，并根据距离确定前景区域。
7.将确定的前景区域转换为8位无符号整数类型，并使用减法操作得到未知区域。
8.使用连通组件分析（connectedComponents）对前景区域进行标记，得到初始的分水岭标记图像。
9.将未知区域标签设置为0，将分水岭算法需要处理的区域标记为大于1的整数。
10.应用分水岭算法（cv2.watershed()）对图像进行分割。
11.根据分水岭算法的结果，将边界标记为红色，非主要分类标记为绿色。
12.显示原始图像和分割结果。
